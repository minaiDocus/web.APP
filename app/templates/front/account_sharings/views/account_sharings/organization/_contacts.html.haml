#guest_collaborators.derivationLeft
  .row.retractable.with-filter
    .col-md-12
      %h3
        Contacts
        %span.badge.badge-info= @guest_collaborators.count
      .row
        .col-md-12
          .box.border-top-0.bg-light
            %table.table.table-condensed.table-striped.margin1top.margin1bottom.table-detachable-head.table-bordered-inner
              %thead
                %tr
                  %th Date de création
                  %th Email
                  %th Société
                  %th Nom
                  %th Nb. de dossiers
                  %th Actions
              %tbody
                - @guest_collaborators.each do |guest_collaborator|
                  %tr
                    %td.date= guest_collaborator.created_at.strftime('%d/%m/%Y %H:%M')
                    %td= guest_collaborator.email
                    %td= guest_collaborator.company
                    %td= guest_collaborator.name
                    %td= guest_collaborator.accounts.size
                    %td
                      = link_to glyphicon('pencil'), '#', class: 'btn btn-light edit_contact', style: 'width: 40px', data: { id: guest_collaborator.id }
                      = link_to glyphicon('x'), account_sharings_organization_destroy_contact_path(@organization, guest_collaborator), method: :delete, data: { confirm: "Êtes-vous sûr de vouloir supprimer le contact \"#{guest_collaborator.info}\" ?" }, class: 'btn btn-light', style: 'width: 40px'
            .alignright.margin1bottom
              = link_to 'Ajouter un contact', '#', class: 'btn btn-primary edit_contact', data: { id: 0 }

            = render file: Rails.root.join('app/views/shared/_pagination.html.haml'), locals: { name: 'sharing_contacts', total_pages: @guest_collaborators.total_pages }