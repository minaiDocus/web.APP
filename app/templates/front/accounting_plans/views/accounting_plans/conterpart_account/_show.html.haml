#conterpart-accounts-body
  .row
    .col-sm-12
      - ajax_emit = param_encode({ name: 'ca.edit-conterpart-account' , events: 'click'})
      %button.btn.btn-primary.as_idocus_emit{ idocus: ajax_emit } Ajouter
      - ajax_emit = param_encode({ name: 'ca.show-customers-selection' , events: 'click'})
      %button.btn.btn-primary.as_idocus_emit{ idocus: ajax_emit } Ajouter à partir d'un dossier
      %button.btn Ajouter a partir d'une activité
      
  %form{ id: 'conterpart_account_link_form', action: link_organization_customer_conterpart_account_path(@organization, @customer), method: 'POST' }
    .row
      .col-sm-5
        .account-item-selector-container
          - ajax_emit = param_encode({ name: 'ca.select-conterpart' , events: 'dblclick'})
          %select.account-item-selector.w-100.as_idocus_emit{ name: "conterpart_account[conterpart_accounts][]", multiple: true, idocus: ajax_emit }
        %i.hint Double cliquez pour éditer / voir détails
      .col-sm-2
        %table
          %tr
            %td
              - idocus_params = param_encode({ url: "#conterpart_accounts", method: 'POST', confirm: 'Etes vous sûr?', form: { id: 'conterpart_account_link_form', dump_action: true } })
              %button.btn.btn-primary.as_idocus_ajax{ type: 'button', idocus: idocus_params }= glyphicon('chevron-left', {size: '16', color: '#fff'}) + " Lier " + glyphicon('chevron-right', {size: '16', color: '#fff'})
          %tr
            %td.pt-5
              - idocus_params = param_encode({ name: 'ca.delete-conterpart-account' })
              %button.btn.btn-danger.as_idocus_emit{ type: 'button', idocus: idocus_params }= glyphicon('chevron-left', {size: '16', color: '#FF4848'}) + "  Supprimer la séléction "
      .col-sm-5
        - ajax_emit = param_encode({ name: 'ca.select-third-part' , events: 'dblclick'})
        = select_tag 'conterpart_account[accounting_plan_items][]', options_for_select(@accounting_plan_items), include_blank: false,  class: 'as_idocus_emit', id: 'account-third-part-selector', multiple: true, idocus: ajax_emit

  .additionnal-fields.hide
  %form.select-from-customer.hide{ id: 'from_customer_form', action: validate_from_customer_organization_customer_conterpart_account_path(@organization, @customer), method: 'POST' }
    - ajax_emit = param_encode({ name: 'ca.add-from-customer' , events: 'change'}) 
    = select_tag 'from_customer[customer]', options_for_select((customers - [@customer]).map{|cu| [cu.info, cu.id]}), include_blank: true,  class: 'as_idocus_emit', idocus: ajax_emit
    .select-conterpart-customer-container
      = select_tag 'from_customer[conterpart_accounts][]', options_for_select([]), include_blank: true,  class: 'select-conterpart-customer', multiple: true
    .select-from-customer-button.hide
      - idocus_params = param_encode({ url: "#from_customer", method: 'POST', form: { id: 'from_customer_form', dump_action: true }, after_send: 'ca.refresh_accounts_list' })
      %button.btn.btn-primary.as_idocus_ajax{ type: 'button', idocus: idocus_params }= glyphicon('plus', { size: '16', color: '#ffff'})