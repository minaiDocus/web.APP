= simple_form_for @member, url: collaborator_form_url(@organization, @member), html: { class: 'form-horizontal' } do |f|
  - company_value = @member.persisted? ? @member.user.company : current_user.company
  .modal-body
    = f.simple_fields_for :user do |uf|
      .form-group
        .row
          .col-md-6
            = uf.input :first_name, label_html: { class: 'semibold custom-label-field' }, input_html: { class: 'select-container no-padding w-100 book-code-software custom-input-field', placeholder: "Jean" }
          .col-md-6
            = uf.input :last_name, label_html: { class: 'semibold custom-label-field' }, input_html: { class: 'select-container no-padding w-100 book-code-software custom-input-field', placeholder: "Dupont" }

      .form-group
        .row
          .col-md-6
            = uf.input :email, label_html: { class: 'semibold custom-label-field' }, input_html: { class: 'select-container no-padding w-100 book-code-software custom-input-field', placeholder: "jean.dupont@mail.fr" }, hint: "Correspond à l'identifiant de connexion de votre collaborateur", disabled: @member.user.admin?
          .col-md-6
            = uf.input :company, label_html: { class: 'semibold custom-label-field' }, input_html: { class: 'select-container no-padding w-100 book-code-software custom-input-field', placeholder: "iDocus", value: company_value }

    = f.input :code, label_html: { class: 'semibold custom-label-field' }, input_html: { class: 'select-container no-padding w-100 book-code-software custom-input-field', placeholder: "IDOC%JEAN-D" }, hint: "Doit impérativement commencer par : #{@organization.code}%", required: true
    - if @user.leader?
      = f.input :role, collection: organization_role_options, label_html: { class: 'select semibold custom-label-field' }, input_html: { class: 'select-collaborator-role', id: 'select-collaborator-role' }, required: true, prompt: '', multiple: false
    = f.input :group_ids, collection: @organization.groups, label_html: { class: 'semibold custom-label-field' }, label: t('activerecord.models.group.name').pluralize, input_html: { class: 'select-organization-group-list', id: 'select-organization-group-list', 'multiple' => 'multiple' }
    
  .modal-footer
    .form-group.no-margin
      .w-100.text-end
        - if action_name.in?(%w(new create))
          = link_to t('actions.cancel'), organization_collaborators_path(@organization), class: 'btn btn-light'
        - else
          = link_to t('actions.cancel'), organization_collaborator_path(@organization, @member), class: 'btn btn-light'
        = f.submit t('actions.submit'), class: 'btn btn-primary semibold'
