!!!
%html
  %head
    %title
      - if content_for?(:title)
        = yield(:title)
      - else
        = t('layouts.title')
    %meta{ :content => "text/html; charset=UTF-8", "http-equiv" => "Content-type" }
    %meta{ name: "viewport", content: "width=device-width, initial-scale=1" }
    = yield(:head)

    %link{ :rel => 'shortcut icon', :type => "image/ico", :href => image_path('favicon.ico') }
    = csrf_meta_tag
    = stylesheet_link_tag 'front/main'
    = javascript_include_tag 'front/main'
    = javascript_include_tag Ckeditor.cdn_url

  = render partial: 'layouts/front/header'
  - if current_user.is_admin?
    .row
      .col-md-12.box
        - if action_name == 'index' || (controller_name == 'organizations' && action_name == 'show') || (controller_name == 'reporting' && action_name == 'show') || controller_name == 'profiles'
          %form{ action: current_url, method: 'GET', class: 'form-inline margin0bottom' }
            = label_tag :user_code, 'Visualiser et agir en tant que :', class: 'mr-sm-2'
            = text_field_tag :user_code, session[:user_code].presence, class: 'input-medium mr-sm-2', placeholder: 'code utilisateur'
            = submit_tag t('actions.submit'), class: 'btn btn-primary mr-sm-2'
            = link_to 'Réinitialiser', current_url(Hash[:user_code, current_user.memberships.first&.code]), class: 'btn btn-light'
        - else
          Visualiser et agir en tant que :
          %span.badge.badge-secondary.fs-origin #{current_user_info}
          = link_to 'Réinitialiser', current_url(Hash[:user_code, current_user.memberships.first&.code]), class: 'btn btn-light'
  .body_content
    - if @is_organization_layout   
      = render partial: 'layouts/front/organization_lefter'
    - else
      != content_for?(:content) ? yield(:content) : yield
  - render partial: 'layouts/front/support_chat'
  = render partial: 'layouts/front/notice_flush_messages'

  = render partial: 'layouts/front/footer'

  %div.loading_box.hide{style: 'background-color: rgba(0,0,0,0.5); width: 100%; height: 100%; position: absolute; z-index: 1100; top: 0; left: 0'}
    %span Chargement en cours ...
